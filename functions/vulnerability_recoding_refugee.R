hhy
attach(hhy)

HH_head
hhy$lactating_number
hhy$HH_head_gender
hhy$HH_head
hhy$respondent_gender
hhy$anc_group.pregnant_number=hhy$hh_sizehhy$HH_size



ifelse(indi_age>=15 & indi_age<=64,1,0),
indi_age>=15 & indi_age<=64

df$individual_age
df %>% 
  mutate(
    work_age=individual_age>=15 & individual_age<=64,
    not_work_age=individual_age<15 & individual_age>64 
  ) %>% 
  group_by(instance_name) %>% 
  summarise(
    sum_working_age=sum(work_age,na.rm = TRUE),
    sum_not_working_age=sum(not_work_age,na.rm = TRUE),
    vi.dependency_ratio=sum(not_work_age,na.rm=TRUE)/sum(work_age,na.rm = TRUE)
  ) %>% 
  select(starts_with("vi"))

IS.work_age= (indi_age>=15 & indi_age<=64,1,0),
IS.work_notage=ifelse(indi_age<15 & indi_age>64,1,0),


IS.dependency_ratio= sum(IS.work_notage,na.rm=TRUE)/sum(IS.work_age, na.rm=TRUE),
hhy %>% 
  mutate(
    preg_no= ifelse(is.na( anc_group.pregnant_number), 0,anc_group.pregnant_number),
    lact_no= ifelse(is.na( lactating_number), 0,anc_group.pregnant_number),
    vi.preg_lact= ifelse(preg_no+lact_no>0,1,0),
    hh_gen=ifelse(HH_head=="yes", respondent_gender, HH_head_gender),
    vi.female_hoh=ifelse(hh_gen=="female",1,0),
    vi.hh_size= ifelse(hh_size>=6,1,0),
    
    

    
    ) %>% 
  select(starts_with("vi."))
